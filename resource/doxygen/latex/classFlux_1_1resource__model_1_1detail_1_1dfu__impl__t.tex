\hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{}\doxysubsection{Flux\+::resource\+\_\+model\+::detail\+::dfu\+\_\+impl\+\_\+t Class Reference}
\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}


{\ttfamily \#include $<$dfu\+\_\+impl.\+hpp$>$}



Inheritance diagram for Flux\+::resource\+\_\+model\+::detail\+::dfu\+\_\+impl\+\_\+t\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Flux\+::resource\+\_\+model\+::detail\+::dfu\+\_\+impl\+\_\+t\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a5fc6d04e0b22f3c34fa8ca7aa2220af1}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a5fc6d04e0b22f3c34fa8ca7aa2220af1}} 
{\bfseries dfu\+\_\+impl\+\_\+t} (std\+::shared\+\_\+ptr$<$ f\+\_\+resource\+\_\+graph\+\_\+t $>$ g, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structFlux_1_1resource__model_1_1resource__graph__db__t}{resource\+\_\+graph\+\_\+db\+\_\+t}} $>$ db, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} $>$ m)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a05b5e76d118c9170f38fad36b31e5176}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a05b5e76d118c9170f38fad36b31e5176}} 
{\bfseries dfu\+\_\+impl\+\_\+t} (const \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \&o)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd31099b56c95735d3e671aa0c5b9df6}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd31099b56c95735d3e671aa0c5b9df6}} 
{\bfseries dfu\+\_\+impl\+\_\+t} (\mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \&\&o)=default
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af3d8386aa0726b044e1d000bb67d8ee1}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af3d8386aa0726b044e1d000bb67d8ee1}} 
\mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \& {\bfseries operator=} (const \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \&o)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aed81039c7fd95cdf2aa8dec5f47867b6}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aed81039c7fd95cdf2aa8dec5f47867b6}} 
\mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \& {\bfseries operator=} (\mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t}{dfu\+\_\+impl\+\_\+t}} \&\&o)=default
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab1e87687981d2c8a8e3a2a947d1a0121}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab1e87687981d2c8a8e3a2a947d1a0121}} 
const std\+::shared\+\_\+ptr$<$ const f\+\_\+resource\+\_\+graph\+\_\+t $>$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab1e87687981d2c8a8e3a2a947d1a0121}{get\+\_\+graph}} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2d01388ca8d10af5d6b172b4de290d30}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2d01388ca8d10af5d6b172b4de290d30}} 
const std\+::shared\+\_\+ptr$<$ const \mbox{\hyperlink{structFlux_1_1resource__model_1_1resource__graph__db__t}{resource\+\_\+graph\+\_\+db\+\_\+t}} $>$ {\bfseries get\+\_\+graph\+\_\+db} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afb13db4893ce37e2c4f95d384de4d24e}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afb13db4893ce37e2c4f95d384de4d24e}} 
const std\+::shared\+\_\+ptr$<$ const \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} $>$ {\bfseries get\+\_\+match\+\_\+cb} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4660aea2adbf264e84bc55f967bfe166}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4660aea2adbf264e84bc55f967bfe166}} 
const std\+::string \& {\bfseries err\+\_\+message} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a191e977e814eb17f65f77987d1a978a1}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a191e977e814eb17f65f77987d1a978a1}} 
const \mbox{\hyperlink{classFlux_1_1resource__model_1_1expr__eval__api__t}{expr\+\_\+eval\+\_\+api\+\_\+t}} \& {\bfseries get\+\_\+expr\+\_\+eval} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab5020605f89b437c8c3715f99fcf3e3d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab5020605f89b437c8c3715f99fcf3e3d}} 
const unsigned int {\bfseries get\+\_\+preorder\+\_\+count} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3fc7228b09da82bd3c0b4cc78275f0b0}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3fc7228b09da82bd3c0b4cc78275f0b0}} 
const unsigned int {\bfseries get\+\_\+postorder\+\_\+count} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afb5c9707fa0138b4f44ee5ce14cec80f}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afb5c9707fa0138b4f44ee5ce14cec80f}} 
const std\+::set$<$ std\+::string $>$ \& {\bfseries get\+\_\+exclusive\+\_\+resource\+\_\+types} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aade0a6e9dc9bee33e5a054920abda8cc}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aade0a6e9dc9bee33e5a054920abda8cc}} 
void {\bfseries set\+\_\+graph} (std\+::shared\+\_\+ptr$<$ f\+\_\+resource\+\_\+graph\+\_\+t $>$ g)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a955ee191dd4128d7c6ec2b2343999269}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a955ee191dd4128d7c6ec2b2343999269}} 
void {\bfseries set\+\_\+graph\+\_\+db} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structFlux_1_1resource__model_1_1resource__graph__db__t}{resource\+\_\+graph\+\_\+db\+\_\+t}} $>$ db)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a10b8d35c40fec48c746148c597c688b7}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a10b8d35c40fec48c746148c597c688b7}} 
void {\bfseries set\+\_\+match\+\_\+cb} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} $>$ m)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a016ff9ec923d513a3aa6244e07456506}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a016ff9ec923d513a3aa6244e07456506}} 
void {\bfseries clear\+\_\+err\+\_\+message} ()
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afad4bb80129442076d088e8a7fd0d899}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afad4bb80129442076d088e8a7fd0d899}} 
void {\bfseries reset\+\_\+color} ()
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a51305be07904b969159f3f5f500c6ca7}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a51305be07904b969159f3f5f500c6ca7}} 
int {\bfseries reset\+\_\+exclusive\+\_\+resource\+\_\+types} (const std\+::set$<$ std\+::string $>$ \&x\+\_\+types)
\item 
bool \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7f58c65eb160d80a886d04d30a8abf4d}{exclusivity}} (const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, vtx\+\_\+t u)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3e82cc35ceab13cda17f76cc4f0c14b3}{prime\+\_\+pruning\+\_\+filter}} (const subsystem\+\_\+t \&subsystem, vtx\+\_\+t u, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
void \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a42292cfe93c9354444c97d84a51d972e}{prime\+\_\+jobspec}} (std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, std\+::unordered\+\_\+map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
{\footnotesize template$<$class lookup\+\_\+t $>$ }\\int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aec032226b2fd63441d88f31be2ec02f9}{count\+\_\+relevant\+\_\+types}} (\mbox{\hyperlink{structplanner__multi__t}{planner\+\_\+multi\+\_\+t}} $\ast$plan, const lookup\+\_\+t \&lookup, std\+::vector$<$ uint64\+\_\+t $>$ \&resource\+\_\+counts)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a59829164153c0690c9f528f1c4d89ddc}{select}} (\mbox{\hyperlink{classFlux_1_1Jobspec_1_1Jobspec}{Jobspec\+::\+Jobspec}} \&jobspec, vtx\+\_\+t root, \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, bool exclusive)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0fba230ebdbe2b603a8e430bf38645dd}{find}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const std\+::string \&criteria)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3b82a4ce4a4c43e92047e21cc8ed3995}{update}} (vtx\+\_\+t root, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4976d66fd9efe01951c965a136e7e4e7}{update}} (vtx\+\_\+t root, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const std\+::string \&str, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1resource__reader__base__t}{resource\+\_\+reader\+\_\+base\+\_\+t}} $>$ \&reader, \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af0f80d2e84e3a6ea9b375d2c6a292a11}{update}} ()
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9a42dbc4e4417aa58a3403a27bd5ef6}{remove}} (vtx\+\_\+t root, int64\+\_\+t jobid)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a280cc07cc430835d557130c81f456a0d}{mark}} (const std\+::string \&root\+\_\+path, resource\+\_\+pool\+\_\+t\+::status\+\_\+t status)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7e3cc6f5c52b7759621a724ec34ecfcb}{mark}} (std\+::set$<$ int64\+\_\+t $>$ \&ranks, resource\+\_\+pool\+\_\+t\+::status\+\_\+t status)
\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a615d75fe296f34d00231e53f119d7def}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a615d75fe296f34d00231e53f119d7def}} 
const std\+::string {\bfseries level} () const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ace6ef44bfe00e2db5606e1151895cb6d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ace6ef44bfe00e2db5606e1151895cb6d}} 
void {\bfseries tick} ()
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9d023bfa5343355798a2bdaf636e2ad1}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9d023bfa5343355798a2bdaf636e2ad1}} 
bool {\bfseries in\+\_\+subsystem} (edg\+\_\+t e, const subsystem\+\_\+t \&subsystem) const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aef91048f94bd84635634e2ce4250bd6c}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aef91048f94bd84635634e2ce4250bd6c}} 
bool {\bfseries stop\+\_\+explore} (edg\+\_\+t e, const subsystem\+\_\+t \&subsystem) const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a1156a2c5c9c5b187f2a9d9d67af17fa8}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a1156a2c5c9c5b187f2a9d9d67af17fa8}} 
bool {\bfseries modify\+\_\+traversal} (vtx\+\_\+t u, bool emit\+\_\+shadow\+\_\+from\+\_\+parent) const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a91365dd6cb1b51833aba96e40fd95ed4}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a91365dd6cb1b51833aba96e40fd95ed4}} 
bool {\bfseries stop\+\_\+explore\+\_\+best} (edg\+\_\+t e, bool mod) const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_abe5dc30d4bbe14c9c974dcf509997576}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_abe5dc30d4bbe14c9c974dcf509997576}} 
bool {\bfseries get\+\_\+eff\+\_\+exclusive} (bool x, bool mod) const
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0a189079204d6be2a7d32a93fa484691}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0a189079204d6be2a7d32a93fa484691}} 
unsigned {\bfseries get\+\_\+eff\+\_\+needs} (unsigned needs, unsigned size, bool mod) const
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af8f863121e47158d9f2162343e630bc4}{by\+\_\+avail}} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, const std\+::string \&s, vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a72d3cf7e913f7b855ee9f58f09dd2c54}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a72d3cf7e913f7b855ee9f58f09dd2c54}} 
int {\bfseries by\+\_\+excl} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, const std\+::string \&s, vtx\+\_\+t u, bool exclusive\+\_\+in, const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} \&\mbox{\hyperlink{structresource}{resource}})
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a63080a2f8c3e444d69e36f1abea3efa0}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a63080a2f8c3e444d69e36f1abea3efa0}} 
int {\bfseries by\+\_\+subplan} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, const std\+::string \&s, vtx\+\_\+t u, const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} \&\mbox{\hyperlink{structresource}{resource}})
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_acd16aeecd79744c2e0bda9524cb29fb5}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_acd16aeecd79744c2e0bda9524cb29fb5}} 
int {\bfseries prune} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, bool excl, const std\+::string \&subsystem, vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0d91543908ec607d347386402e416bde}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0d91543908ec607d347386402e416bde}} 
\mbox{\hyperlink{structplanner__multi__t}{planner\+\_\+multi\+\_\+t}} $\ast$ {\bfseries subtree\+\_\+plan} (vtx\+\_\+t u, std\+::vector$<$ uint64\+\_\+t $>$ \&avail, std\+::vector$<$ const char $\ast$ $>$ \&types)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a344ea05948807c274f154e4c50a3e441}{match}} (vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $\ast$$\ast$slot\+\_\+resource, unsigned int $\ast$nslots, const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $\ast$$\ast$match\+\_\+resource)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd9741eeb38df82c1090d40b620a3109}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd9741eeb38df82c1090d40b620a3109}} 
bool {\bfseries slot\+\_\+match} (vtx\+\_\+t u, const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $\ast$slot\+\_\+resource)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a221e50eb23deb7b2a634302d541242ab}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a221e50eb23deb7b2a634302d541242ab}} 
const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \& {\bfseries test} (vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool \&prestine, unsigned int \&nslots, match\+\_\+kind\+\_\+t \&ko)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aa27039400fb9296e91876706e8e087e8}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aa27039400fb9296e91876706e8e087e8}} 
bool {\bfseries is\+\_\+pconstraint\+\_\+matched} (vtx\+\_\+t u, const std\+::string \&property)
\item 
int \mbox{\hyperlink{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a000334449d013958e4f588204726b4f0}{accum\+\_\+if}} (const subsystem\+\_\+t \&subsystem, const std\+::string \&type, unsigned int count, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&accum)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a61342025772eace4cf836e5df61d1ef5}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a61342025772eace4cf836e5df61d1ef5}} 
int {\bfseries accum\+\_\+if} (const subsystem\+\_\+t \&subsystem, const std\+::string \&type, unsigned int count, std\+::unordered\+\_\+map$<$ std\+::string, int64\+\_\+t $>$ \&accum)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a1d13adbc5a04e5b89796a55c273a336b}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a1d13adbc5a04e5b89796a55c273a336b}} 
int {\bfseries prime\+\_\+exp} (const subsystem\+\_\+t \&subsystem, vtx\+\_\+t u, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfv)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9c8c9891a0698b2674b882baf05980d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9c8c9891a0698b2674b882baf05980d}} 
int {\bfseries explore} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, visit\+\_\+t direction, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, unsigned int multiplier=1)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a5cb780b590a33765c7b35ed9c2a0163a}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a5cb780b590a33765c7b35ed9c2a0163a}} 
int {\bfseries explore\+\_\+statically} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, visit\+\_\+t direction, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aac80456728295f0e6392f8030a7d8930}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aac80456728295f0e6392f8030a7d8930}} 
int {\bfseries explore\+\_\+dynamically} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, visit\+\_\+t direction, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, unsigned int multiplier=1)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a76881923235407a96ad8a5bef4a9d7b3}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a76881923235407a96ad8a5bef4a9d7b3}} 
bool {\bfseries is\+\_\+enough} (const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, unsigned int multiplier)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a087cab6dde0f929e51ef03abcf15703d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a087cab6dde0f929e51ef03abcf15703d}} 
int {\bfseries new\+\_\+sat\+\_\+types} (const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, unsigned int multiplier, std\+::set$<$ std\+::string $>$ \&sat\+\_\+types)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a090f6a859586bed9687c184e0776bbd2}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a090f6a859586bed9687c184e0776bbd2}} 
int {\bfseries aux\+\_\+upv} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const subsystem\+\_\+t \&subsystem, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae35ad733acc6a8c5aa1a4073f88ad110}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae35ad733acc6a8c5aa1a4073f88ad110}} 
int {\bfseries cnt\+\_\+slot} (const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&slot\+\_\+shape, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu\+\_\+slot)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a36a864d1ccee664d627e57d0fd282bd7}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a36a864d1ccee664d627e57d0fd282bd7}} 
int {\bfseries dom\+\_\+slot} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, unsigned int nslots, bool prestine, bool $\ast$excl, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4e80500c26670286f04adc9c1be1e5ac}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4e80500c26670286f04adc9c1be1e5ac}} 
int {\bfseries dom\+\_\+exp} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7fe4eedd884aae29a63289404cc3c56c}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7fe4eedd884aae29a63289404cc3c56c}} 
int {\bfseries dom\+\_\+dfv} (const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&meta, vtx\+\_\+t u, const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, bool prestine, bool $\ast$excl, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3388b269da83323c87aa7c52d52541a0}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3388b269da83323c87aa7c52d52541a0}} 
int {\bfseries dom\+\_\+find\+\_\+dfv} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const std\+::string \&criteria, vtx\+\_\+t u, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1vtx__predicates__override__t}{vtx\+\_\+predicates\+\_\+override\+\_\+t}} \&p)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b505fd668f3868ab8676fc455f43397}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b505fd668f3868ab8676fc455f43397}} 
int {\bfseries aux\+\_\+find\+\_\+upv} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const std\+::string \&criteria, vtx\+\_\+t u, const subsystem\+\_\+t \&aux, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1vtx__predicates__override__t}{vtx\+\_\+predicates\+\_\+override\+\_\+t}} \&p)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3037745eca08e28ec4cc97bdabaeae98}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3037745eca08e28ec4cc97bdabaeae98}} 
int {\bfseries has\+\_\+root} (vtx\+\_\+t root, std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, unsigned int $\ast$needs)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a77c1fa82aa2987d6fdbea8a59631de75}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a77c1fa82aa2987d6fdbea8a59631de75}} 
int {\bfseries has\+\_\+remaining} (vtx\+\_\+t root, std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd83c6400f410888fccc07474965c7a3}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_afd83c6400f410888fccc07474965c7a3}} 
int {\bfseries resolve\+\_\+graph} (vtx\+\_\+t root, std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&resources, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, bool excl, unsigned int $\ast$needs)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a84657f1d147f0c6765f2fde3108304b7}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a84657f1d147f0c6765f2fde3108304b7}} 
int {\bfseries resolve} (\mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a513c309914a9b212a3414b1c86c7104c}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a513c309914a9b212a3414b1c86c7104c}} 
int {\bfseries enforce} (const subsystem\+\_\+t \&subsystem, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2f016e179d2d9b6006d623dc302858fc}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2f016e179d2d9b6006d623dc302858fc}} 
int {\bfseries enforce\+\_\+constrained} (\mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2ae48d2f09236329777ee76905c463ae}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2ae48d2f09236329777ee76905c463ae}} 
int {\bfseries enforce\+\_\+dfv} (vtx\+\_\+t u, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b63d73c6b13cde58c1d44adfb144cbc}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b63d73c6b13cde58c1d44adfb144cbc}} 
int {\bfseries enforce\+\_\+remaining} (vtx\+\_\+t u, \mbox{\hyperlink{classFlux_1_1resource__model_1_1scoring__api__t}{scoring\+\_\+api\+\_\+t}} \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_acf8db5771ebded81ef52dddab2fc24ed}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_acf8db5771ebded81ef52dddab2fc24ed}} 
int {\bfseries emit\+\_\+vtx} (vtx\+\_\+t u, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&w, unsigned int needs, bool exclusive)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9db3b7b9b1ba379e5cd083feec41e3e5}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9db3b7b9b1ba379e5cd083feec41e3e5}} 
int {\bfseries emit\+\_\+edg} (edg\+\_\+t e, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&w)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ac643b80a2251ee9ee9fbbc3a0c6579f8}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ac643b80a2251ee9ee9fbbc3a0c6579f8}} 
int {\bfseries upd\+\_\+txfilter} (vtx\+\_\+t u, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a50b49774ae2bf42ddf6e7e8dc8e0c75c}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a50b49774ae2bf42ddf6e7e8dc8e0c75c}} 
int {\bfseries upd\+\_\+agfilter} (vtx\+\_\+t u, const subsystem\+\_\+t \&s, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4112be55870da099aa87b4d7f11ec390}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4112be55870da099aa87b4d7f11ec390}} 
int {\bfseries upd\+\_\+idata} (vtx\+\_\+t u, const subsystem\+\_\+t \&s, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae84f3521ee7f2441e539ddbad7e1fa1b}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae84f3521ee7f2441e539ddbad7e1fa1b}} 
int {\bfseries upd\+\_\+by\+\_\+outedges} (const subsystem\+\_\+t \&subsystem, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, vtx\+\_\+t u, edg\+\_\+t e)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4c63fd510f6a334a9eebec9eb8991908}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4c63fd510f6a334a9eebec9eb8991908}} 
int {\bfseries upd\+\_\+plan} (vtx\+\_\+t u, const subsystem\+\_\+t \&s, unsigned int needs, bool excl, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, bool full, int \&n)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae811ac79854006b4ba6f4d7e3148c5b2}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae811ac79854006b4ba6f4d7e3148c5b2}} 
int {\bfseries accum\+\_\+to\+\_\+parent} (vtx\+\_\+t u, const subsystem\+\_\+t \&s, unsigned int needs, bool excl, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a064bd3e8a6d79e7cf5833785d23399f9}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a064bd3e8a6d79e7cf5833785d23399f9}} 
int {\bfseries upd\+\_\+meta} (vtx\+\_\+t u, const subsystem\+\_\+t \&s, unsigned int needs, bool excl, int n, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aa62bad9e5ee41f36836fbe88d9c3cd35}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aa62bad9e5ee41f36836fbe88d9c3cd35}} 
int {\bfseries upd\+\_\+sched} (vtx\+\_\+t u, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const subsystem\+\_\+t \&s, unsigned int needs, bool excl, int n, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, bool full, const std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&dfu, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a73d199c8efa25dd054c5a9ce2f81386c}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a73d199c8efa25dd054c5a9ce2f81386c}} 
int {\bfseries upd\+\_\+upv} (vtx\+\_\+t u, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, const subsystem\+\_\+t \&subsystem, unsigned int needs, bool excl, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, bool full, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab8d95eee46a328d4cff652bfa3c71e59}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ab8d95eee46a328d4cff652bfa3c71e59}} 
int {\bfseries upd\+\_\+dfv} (vtx\+\_\+t u, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&writers, unsigned int needs, bool excl, const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&jobmeta, bool full, std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&to\+\_\+parent, bool emit\+\_\+shadow)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9f14314850c1a02964aff13535f1010}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9f14314850c1a02964aff13535f1010}} 
int {\bfseries rem\+\_\+txfilter} (vtx\+\_\+t u, int64\+\_\+t jobid, bool \&stop)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a49cdfb130226a54763be1fa728b33be4}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a49cdfb130226a54763be1fa728b33be4}} 
int {\bfseries rem\+\_\+agfilter} (vtx\+\_\+t u, int64\+\_\+t jobid, const std\+::string \&s)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9013151fc2bd06057c99f53f44bc728d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a9013151fc2bd06057c99f53f44bc728d}} 
int {\bfseries rem\+\_\+idata} (vtx\+\_\+t u, int64\+\_\+t jobid, const std\+::string \&s, bool \&stop)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a06851feaf2b7fa9f88518c9f788f3996}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a06851feaf2b7fa9f88518c9f788f3996}} 
int {\bfseries rem\+\_\+plan} (vtx\+\_\+t u, int64\+\_\+t jobid)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2a43810ee2226f353d2681e4850ea223}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2a43810ee2226f353d2681e4850ea223}} 
int {\bfseries rem\+\_\+upv} (vtx\+\_\+t u, int64\+\_\+t jobid)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a61730db9d2b3095ec59e10e3594a267d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a61730db9d2b3095ec59e10e3594a267d}} 
int {\bfseries rem\+\_\+dfv} (vtx\+\_\+t u, int64\+\_\+t jobid)
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2e4d9b1d145ca494aba9894dd0b91d61}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2e4d9b1d145ca494aba9894dd0b91d61}} 
int {\bfseries rem\+\_\+exv} (int64\+\_\+t jobid)
\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aab9e0a38a37e5649291e93f0a36e17fd}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aab9e0a38a37e5649291e93f0a36e17fd}} 
\mbox{\hyperlink{classFlux_1_1resource__model_1_1color__t}{color\+\_\+t}} {\bfseries m\+\_\+color}
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a6fa326b3af48f8c866350423bd08479e}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a6fa326b3af48f8c866350423bd08479e}} 
uint64\+\_\+t {\bfseries m\+\_\+best\+\_\+k\+\_\+cnt} = 0
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2e063ec55d92dafbd7d535fdbcab2631}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a2e063ec55d92dafbd7d535fdbcab2631}} 
unsigned int {\bfseries m\+\_\+trav\+\_\+level} = 0
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_abebb2163338491db384a8ca2c0f9e301}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_abebb2163338491db384a8ca2c0f9e301}} 
unsigned int {\bfseries m\+\_\+preorder} = 0
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aec89754975e8c18eced6aa100d9a466e}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aec89754975e8c18eced6aa100d9a466e}} 
unsigned int {\bfseries m\+\_\+postorder} = 0
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b5b8127fb5884e87b0bed879bbd1f0d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a8b5b8127fb5884e87b0bed879bbd1f0d}} 
std\+::shared\+\_\+ptr$<$ std\+::map$<$ subsystem\+\_\+t, vtx\+\_\+t $>$ $>$ {\bfseries m\+\_\+roots} = nullptr
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ac11bfb84ddd9be80ee615eadec8882ad}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ac11bfb84ddd9be80ee615eadec8882ad}} 
std\+::shared\+\_\+ptr$<$ f\+\_\+resource\+\_\+graph\+\_\+t $>$ {\bfseries m\+\_\+graph} = nullptr
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a010f089d5c09b901fcabe8695b1991b3}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a010f089d5c09b901fcabe8695b1991b3}} 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{structFlux_1_1resource__model_1_1resource__graph__db__t}{resource\+\_\+graph\+\_\+db\+\_\+t}} $>$ {\bfseries m\+\_\+graph\+\_\+db} = nullptr
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a25b83852ea75632e92ead7d3e4a467c4}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a25b83852ea75632e92ead7d3e4a467c4}} 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} $>$ {\bfseries m\+\_\+match} = nullptr
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a21104a772cda8db25384decc6275b67f}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a21104a772cda8db25384decc6275b67f}} 
\mbox{\hyperlink{classFlux_1_1resource__model_1_1expr__eval__api__t}{expr\+\_\+eval\+\_\+api\+\_\+t}} {\bfseries m\+\_\+expr\+\_\+eval}
\item 
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_adc4e8b60aa5c2e0e6a888aee4958fc35}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_adc4e8b60aa5c2e0e6a888aee4958fc35}} 
std\+::string {\bfseries m\+\_\+err\+\_\+msg} = \char`\"{}\char`\"{}
\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
implementation class of \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__traverser__t}{dfu\+\_\+traverser\+\_\+t}} 

\doxysubsubsection{Member Function Documentation}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a000334449d013958e4f588204726b4f0}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a000334449d013958e4f588204726b4f0}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!accum\_if@{accum\_if}}
\index{accum\_if@{accum\_if}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{accum\_if()}{accum\_if()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::accum\+\_\+if (\begin{DoxyParamCaption}\item[{const subsystem\+\_\+t \&}]{subsystem,  }\item[{const std\+::string \&}]{type,  }\item[{unsigned int}]{count,  }\item[{std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&}]{accum }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

Accumulate count into accum if type matches with one of the resource types used in the scheduler-\/driven aggregate update (SDAU) scheme. \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} provides an interface to configure what types are used for SDAU scheme. \mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af8f863121e47158d9f2162343e630bc4}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af8f863121e47158d9f2162343e630bc4}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!by\_avail@{by\_avail}}
\index{by\_avail@{by\_avail}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{by\_avail()}{by\_avail()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::by\+\_\+avail (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&}]{meta,  }\item[{const std\+::string \&}]{s,  }\item[{vtx\+\_\+t}]{u,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&}]{resources }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

Various pruning methods \mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aec032226b2fd63441d88f31be2ec02f9}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_aec032226b2fd63441d88f31be2ec02f9}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!count\_relevant\_types@{count\_relevant\_types}}
\index{count\_relevant\_types@{count\_relevant\_types}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{count\_relevant\_types()}{count\_relevant\_types()}}
{\footnotesize\ttfamily template$<$class lookup\+\_\+t $>$ \\
int Flux\+::resource\+\_\+model\+::detail\+::dfu\+\_\+impl\+\_\+t\+::count\+\_\+relevant\+\_\+types (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structplanner__multi__t}{planner\+\_\+multi\+\_\+t}} $\ast$}]{plan,  }\item[{const lookup\+\_\+t \&}]{lookup,  }\item[{std\+::vector$<$ uint64\+\_\+t $>$ \&}]{resource\+\_\+counts }\end{DoxyParamCaption})}

Extract the aggregate info in the lookup object as pertaining to the planner-\/tracking resource types into resource\+\_\+counts array, a form that can be used with Planner API.


\begin{DoxyParams}[1]{Parameters}
 & {\em plan} & multi-\/planner object. \\
\hline
 & {\em lookup} & a map type such as std\+::map or unordered\+\_\+map. \\
\hline
\mbox{\texttt{ out}}  & {\em resource\+\_\+counts} & output array. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7f58c65eb160d80a886d04d30a8abf4d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7f58c65eb160d80a886d04d30a8abf4d}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!exclusivity@{exclusivity}}
\index{exclusivity@{exclusivity}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{exclusivity()}{exclusivity()}}
{\footnotesize\ttfamily bool dfu\+\_\+impl\+\_\+t\+::exclusivity (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&}]{resources,  }\item[{vtx\+\_\+t}]{u }\end{DoxyParamCaption})}

Exclusive request? Return true if a resource in resources vector matches resource vertex u and its exclusivity field value is TRUE. (Note that when the system default configuration is added, it can return true even if the exclusive field value is UNSPECIFIED if the system default is configured that way.


\begin{DoxyParams}{Parameters}
{\em resources} & Resource request vector. \\
\hline
{\em u} & visiting resource vertex. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true or false. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0fba230ebdbe2b603a8e430bf38645dd}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a0fba230ebdbe2b603a8e430bf38645dd}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!find@{find}}
\index{find@{find}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{find()}{find()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::find (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&}]{writers,  }\item[{const std\+::string \&}]{criteria }\end{DoxyParamCaption})}

Traverse the resource graph and emit those resources whose status is matched with the matching criteria.


\begin{DoxyParams}{Parameters}
{\em writers} & vertex/edge writers to emit the matched labels \\
\hline
{\em criteria} & matching criteria expression string. Each individual criterion is expressed as a key-\/value pair, representing a predicate p(x) where key is is p and value is x. Currently supported expressions are \char`\"{}status=\{up$\vert$down\}\char`\"{}, \char`\"{}sched-\/now=\{allocated$\vert$free\}\char`\"{}, \char`\"{}sched-\/future=\{reserved$\vert$free\}, or any combination                  of them separated with \char`\"{}and\char`\"{}, \char`\"{}or\char`\"{}, or a whitespace                  which is also interpreted as \char`\"{}and"{} logical operator of two expressions. Parentheses are supported to group expressions with a higher operator precedence. For example, in \char`\"{}status=up and                  (sched-\/now=allocated or sched-\/future=reserved)\char`\"{} The parenthesized expression is evaluated before taking the \char`\"{}and\char`\"{} operator with the the result of the first predicate. Other extra whitespaces around predicates are ignored. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a280cc07cc430835d557130c81f456a0d}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a280cc07cc430835d557130c81f456a0d}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!mark@{mark}}
\index{mark@{mark}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{mark()}{mark()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::mark (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{root\+\_\+path,  }\item[{resource\+\_\+pool\+\_\+t\+::status\+\_\+t}]{status }\end{DoxyParamCaption})}

Update the resource status to up$\vert$down$\vert$etc starting at subtree\+\_\+root.


\begin{DoxyParams}{Parameters}
{\em root\+\_\+path} & path to the root of the subtree to update. \\
\hline
{\em status} & new status value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error. EINVAL\+: graph, roots or match callback not set. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7e3cc6f5c52b7759621a724ec34ecfcb}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a7e3cc6f5c52b7759621a724ec34ecfcb}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!mark@{mark}}
\index{mark@{mark}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{mark()}{mark()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::mark (\begin{DoxyParamCaption}\item[{std\+::set$<$ int64\+\_\+t $>$ \&}]{ranks,  }\item[{resource\+\_\+pool\+\_\+t\+::status\+\_\+t}]{status }\end{DoxyParamCaption})}

Update the resource status to up$\vert$down$\vert$etc for subgraph represented by ranks.


\begin{DoxyParams}{Parameters}
{\em ranks} & set of ranks representing the subgraphs to update. \\
\hline
{\em status} & new status value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error. EINVAL\+: roots or by\+\_\+path not found. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a344ea05948807c274f154e4c50a3e441}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a344ea05948807c274f154e4c50a3e441}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!match@{match}}
\index{match@{match}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{match()}{match()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::match (\begin{DoxyParamCaption}\item[{vtx\+\_\+t}]{u,  }\item[{const std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&}]{resources,  }\item[{const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $\ast$$\ast$}]{slot\+\_\+resource,  }\item[{unsigned int $\ast$}]{nslots,  }\item[{const \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $\ast$$\ast$}]{match\+\_\+resource }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

Test various matching conditions between jobspec and graph including slot match \mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a42292cfe93c9354444c97d84a51d972e}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a42292cfe93c9354444c97d84a51d972e}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!prime\_jobspec@{prime\_jobspec}}
\index{prime\_jobspec@{prime\_jobspec}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{prime\_jobspec()}{prime\_jobspec()}}
{\footnotesize\ttfamily void dfu\+\_\+impl\+\_\+t\+::prime\+\_\+jobspec (\begin{DoxyParamCaption}\item[{std\+::vector$<$ \mbox{\hyperlink{classFlux_1_1Jobspec_1_1Resource}{Jobspec\+::\+Resource}} $>$ \&}]{resources,  }\item[{std\+::unordered\+\_\+map$<$ std\+::string, int64\+\_\+t $>$ \&}]{to\+\_\+parent }\end{DoxyParamCaption})}

Prime the resource section of the jobspec. Aggregate configured subtree resources into jobspec\textquotesingle{}s user\+\_\+data. For example, cluster\mbox{[}1\mbox{]}-\/$>$rack\mbox{[}2\mbox{]}-\/$>$node\mbox{[}4\mbox{]}-\/$>$socket\mbox{[}1\mbox{]}-\/$>$core\mbox{[}2\mbox{]} with socket and core types configured to be tracked will be augmented at the end of priming as\+: cluster\mbox{[}1\mbox{]}(core\+:16)-\/$>$rack\mbox{[}2\mbox{]}(core\+:8)-\/$>$node\mbox{[}4\mbox{]}(core\+:2)-\/$>$ socket\mbox{[}1\mbox{]}(core\+:2)-\/$>$core\mbox{[}2\mbox{]}

The subtree aggregate information is used to prune unnecessary graph traversals


\begin{DoxyParams}[1]{Parameters}
 & {\em resources} & Resource request vector. \\
\hline
\mbox{\texttt{ out}}  & {\em to\+\_\+parent} & output aggregates on the subtree. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
none. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3e82cc35ceab13cda17f76cc4f0c14b3}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3e82cc35ceab13cda17f76cc4f0c14b3}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!prime\_pruning\_filter@{prime\_pruning\_filter}}
\index{prime\_pruning\_filter@{prime\_pruning\_filter}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{prime\_pruning\_filter()}{prime\_pruning\_filter()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::prime\+\_\+pruning\+\_\+filter (\begin{DoxyParamCaption}\item[{const subsystem\+\_\+t \&}]{subsystem,  }\item[{vtx\+\_\+t}]{u,  }\item[{std\+::map$<$ std\+::string, int64\+\_\+t $>$ \&}]{to\+\_\+parent }\end{DoxyParamCaption})}

Prime the resource graph with subtree plans. The subtree plans are instantiated on certain resource vertices and updated with the information on their subtree resources. For example, the subtree plan of a compute node resource vertex can be configured to track the number of available compute cores in aggregate at its subtree. \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}} provides an interface to configure what subtree resources will be tracked by higher-\/level resource vertices.


\begin{DoxyParams}{Parameters}
{\em subsystem} & depth-\/first walk on this subsystem graph for priming. \\
\hline
{\em u} & visiting resource vertex. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error -- call err\+\_\+message () for detail. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9a42dbc4e4417aa58a3403a27bd5ef6}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_ae9a42dbc4e4417aa58a3403a27bd5ef6}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!remove@{remove}}
\index{remove@{remove}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{remove()}{remove()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::remove (\begin{DoxyParamCaption}\item[{vtx\+\_\+t}]{root,  }\item[{int64\+\_\+t}]{jobid }\end{DoxyParamCaption})}

Remove the allocation/reservation referred to by jobid and update the resource state.


\begin{DoxyParams}{Parameters}
{\em root} & root resource vertex. \\
\hline
{\em jobid} & job id. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a59829164153c0690c9f528f1c4d89ddc}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a59829164153c0690c9f528f1c4d89ddc}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!select@{select}}
\index{select@{select}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{select()}{select()}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::select (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classFlux_1_1Jobspec_1_1Jobspec}{Jobspec\+::\+Jobspec}} \&}]{jobspec,  }\item[{vtx\+\_\+t}]{root,  }\item[{\mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&}]{meta,  }\item[{bool}]{exclusive }\end{DoxyParamCaption})}

Entry point for graph matching and scoring depth-\/first-\/and-\/up (DFU) walk. It finds best-\/matching resources and resolves hierarchical constraints. For example, rack\mbox{[}2\mbox{]}-\/$>$node\mbox{[}2\mbox{]} will mark the resource graph to select best-\/matching two nodes that are spread across two distinct best-\/matching racks. What is best matching is defined by the resource selection logic (derived class of \mbox{\hyperlink{classFlux_1_1resource__model_1_1dfu__match__cb__t}{dfu\+\_\+match\+\_\+cb\+\_\+t}}).

Note that how many resource vertices have been selected is encoded in the incoming edge of that vertex for the general case. However, the root vertex does not have an incoming edge and thus \char`\"{}needs\char`\"{} are passed as the output from this method to handle the root special case.


\begin{DoxyParams}[1]{Parameters}
 & {\em jobspec} & Jobspec object. \\
\hline
 & {\em root} & root resource vertex. \\
\hline
 & {\em meta} & metadata on this job. \\
\hline
 & {\em exclusive} & true if exclusive access is requested for root. \\
\hline
\mbox{\texttt{ out}}  & {\em needs} & number of root resources requested. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error -- call err\+\_\+message () for detail. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af0f80d2e84e3a6ea9b375d2c6a292a11}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_af0f80d2e84e3a6ea9b375d2c6a292a11}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!update@{update}}
\index{update@{update}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{update()}{update()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Update to make the resource state ready for the next selection. Ignore the previous select invocation.

\begin{DoxyReturn}{Returns}
0 on success. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4976d66fd9efe01951c965a136e7e4e7}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a4976d66fd9efe01951c965a136e7e4e7}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!update@{update}}
\index{update@{update}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{update()}{update()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::update (\begin{DoxyParamCaption}\item[{vtx\+\_\+t}]{root,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&}]{writers,  }\item[{const std\+::string \&}]{str,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1resource__reader__base__t}{resource\+\_\+reader\+\_\+base\+\_\+t}} $>$ \&}]{reader,  }\item[{\mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&}]{meta }\end{DoxyParamCaption})}

Update the resource state based on the allocation data (str) as deserialized by reader and meta.


\begin{DoxyParams}{Parameters}
{\em root} & root resource vertex. \\
\hline
{\em writers} & vertex/edge writers to emit the matched resources \\
\hline
{\em str} & allocation string such as written in JGF. \\
\hline
{\em reader} & reader object that deserialize str to update the graph \\
\hline
{\em meta} & metadata on the job. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error -- call err\+\_\+message () for detail. 
\end{DoxyReturn}
\mbox{\Hypertarget{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3b82a4ce4a4c43e92047e21cc8ed3995}\label{classFlux_1_1resource__model_1_1detail_1_1dfu__impl__t_a3b82a4ce4a4c43e92047e21cc8ed3995}} 
\index{Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}!update@{update}}
\index{update@{update}!Flux::resource\_model::detail::dfu\_impl\_t@{Flux::resource\_model::detail::dfu\_impl\_t}}
\doxyparagraph{\texorpdfstring{update()}{update()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily int dfu\+\_\+impl\+\_\+t\+::update (\begin{DoxyParamCaption}\item[{vtx\+\_\+t}]{root,  }\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classFlux_1_1resource__model_1_1match__writers__t}{match\+\_\+writers\+\_\+t}} $>$ \&}]{writers,  }\item[{\mbox{\hyperlink{structFlux_1_1resource__model_1_1detail_1_1jobmeta__t}{jobmeta\+\_\+t}} \&}]{meta }\end{DoxyParamCaption})}

Update the resource state based on the previous select invocation and emit the allocation/reservation information.


\begin{DoxyParams}{Parameters}
{\em root} & root resource vertex. \\
\hline
{\em writers} & vertex/edge writers to emit the matched resources \\
\hline
{\em meta} & metadata on the job. \\
\hline
{\em needs} & the number of root resources requested. \\
\hline
{\em excl} & exclusive access requested. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success; -\/1 on error -- call err\+\_\+message () for detail. 
\end{DoxyReturn}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
dfu\+\_\+impl.\+hpp\item 
dfu\+\_\+impl.\+cpp\item 
dfu\+\_\+impl\+\_\+update.\+cpp\end{DoxyCompactItemize}
